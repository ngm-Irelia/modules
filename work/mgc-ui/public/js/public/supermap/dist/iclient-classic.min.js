/*!
 * 
 *     iclient-classic.(http://iclient.supermap.io)
 *     CopyrightÂ© 2000-2017 SuperMap Software Co. Ltd
 *     license: Apache-2.0
 *     version: v9.0.0
 * 
 */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=49)}([function(e,t,n){"use strict";var r=window.SuperMap=window.SuperMap||{};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopologyValidatorRule=t.SummaryType=t.StatisticAnalystMode=t.AnalystSizeUnit=t.AnalystAreaUnit=t.ClipAnalystMode=t.ChartType=t.ClientType=t.Exponent=t.VariogramMode=t.InterpolationAlgorithmType=t.SearchMode=t.PixelFormat=t.StatisticMode=t.UGCLayerType=t.LayerType=t.ColorSpaceType=t.GridType=t.TransferPreference=t.TransferTactic=t.EditType=t.DataReturnMode=t.SurfaceAnalystMethod=t.SmoothMethod=t.OverlayOperationType=t.BufferEndType=t.TurnType=t.SupplyCenterType=t.SideType=t.DirectionType=t.LabelOverLengthMode=t.LabelBackShape=t.AlongLineDirection=t.FillGradientMode=t.TextAlignment=t.ColorGradientType=t.ThemeType=t.RangeMode=t.GraduatedMode=t.GraphAxesTextDisplayMode=t.ThemeGraphType=t.ThemeGraphTextFormat=t.EngineType=t.BufferRadiusUnit=t.Unit=t.MeasureMode=t.SpatialRelationType=t.SpatialQueryMode=t.JoinType=t.QueryOption=t.GeometryType=t.ServerType=t.DataFormat=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.DataFormat=r.default.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},t.ServerType=r.default.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},t.GeometryType=r.default.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",UNKNOWN:"UNKNOWN"},t.QueryOption=r.default.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},t.JoinType=r.default.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},t.SpatialQueryMode=r.default.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},t.SpatialRelationType=r.default.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},t.MeasureMode=r.default.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},t.Unit=r.default.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},t.BufferRadiusUnit=r.default.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},t.EngineType=r.default.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},t.ThemeGraphTextFormat=r.default.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},t.ThemeGraphType=r.default.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},t.GraphAxesTextDisplayMode=r.default.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},t.GraduatedMode=r.default.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},t.RangeMode=r.default.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},t.ThemeType=r.default.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},t.ColorGradientType=r.default.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},t.TextAlignment=r.default.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},t.FillGradientMode=r.default.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},t.AlongLineDirection=r.default.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},t.LabelBackShape=r.default.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},t.LabelOverLengthMode=r.default.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},t.DirectionType=r.default.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},t.SideType=r.default.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},t.SupplyCenterType=r.default.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},t.TurnType=r.default.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},t.BufferEndType=r.default.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},t.OverlayOperationType=r.default.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},t.SmoothMethod=r.default.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},t.SurfaceAnalystMethod=r.default.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},t.DataReturnMode=r.default.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},t.EditType=r.default.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},t.TransferTactic=r.default.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},t.TransferPreference=r.default.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},t.GridType=r.default.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},t.ColorSpaceType=r.default.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},t.LayerType=r.default.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},t.UGCLayerType=r.default.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},t.StatisticMode=r.default.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},t.PixelFormat=r.default.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},t.SearchMode=r.default.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},t.InterpolationAlgorithmType=r.default.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},t.VariogramMode=r.default.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},t.Exponent=r.default.Exponent={EXP1:"EXP1",EXP2:"EXP2"},t.ClientType=r.default.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},t.ChartType=r.default.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},t.ClipAnalystMode=r.default.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"},t.AnalystAreaUnit=r.default.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},t.AnalystSizeUnit=r.default.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},t.StatisticAnalystMode=r.default.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},t.SummaryType=r.default.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},t.TopologyValidatorRule=r.default.TopologyValidatorRule={RegionNoOverlap:"RegionNoOverlap",RegionNoOverlapWith:"RegionNoOverlapWith",RegionContainedByRegion:"RegionContainedByRegion",RegionCoveredByRegion:"RegionCoveredByRegion",LineNoOverlap:"LineNoOverlap",LineNoOverlapWith:"LineNoOverlapWith",PointNoIdentical:"PointNoIdentical"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(4)),u=n(5),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.ProcessingServiceBase",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;u.FetchRequest.get(e).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,n,r){var o=this,i=null;t&&t instanceof n&&(i=new Object,n.toObject(t,i));u.FetchRequest.post(o._processUrl(e),JSON.stringify(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,r):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=a.default.Util.transformResult(e),t=t||1e3;var n=this;if(e)var r=setInterval(function(){u.FetchRequest.get(e.newResourceLocation).then(function(e){return e.json()}).then(function(e){n.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(r),n.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(r),n.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(r),n.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return-1===e.indexOf(".json")&&(e+=".json"),a.default.SecurityManager.getToken(e)&&(e+="?token="+a.default.SecurityManager.getToken(e)),e}}]),t}();t.default=l,a.default.ProcessingServiceBase=l},function(e,t,n){"use strict";var r=window.SuperMap=window.SuperMap||{};r.REST=r.REST||{},e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(5);n(16),n(14),n(38);var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.CLASS_NAME="SuperMap.CommonServiceBase";var r=this;o.default.Util.isArray(t)?(r.urls=t,r.length=t.length,r.totalTimes=r.length,1===r.length?r.url=t[0]:(r.index=parseInt(Math.random()*r.length),r.url=t[r.index])):(r.totalTimes=1,r.url=t),o.default.Util.isArray(t)&&!r.isServiceSupportPolling()&&(r.url=t[0],r.totalTimes=1),r.serverType=r.serverType||o.default.ServerType.ISERVER,(n=n||{})&&o.default.Util.extend(this,n),r.isInTheSameDomain=o.default.Util.isInTheSameDomain(r.url),r.events=new o.default.Events(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners)}return r(e,[{key:"destroy",value:function(){var e=this;o.default.Util.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.isInTheSameDomain=t.isInTheSameDomain;var n=this.getCredential(e.url);if(n){var r=e.url.substring(e.url.length-1,e.url.length);e.url.indexOf("?")>-1&&"?"===r?e.url+=n.getUrlParameters():e.url.indexOf("?")>-1&&"?"!==r?e.url+="&"+n.getUrlParameters():e.url+="?"+n.getUrlParameters()}t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t=e,n=void 0,r=void 0;switch(this.serverType){case o.default.ServerType.ISERVER:n=(r=o.default.SecurityManager.getToken(t))?new o.default.Credential(r,"token"):null;break;case o.default.ServerType.IPORTAL:(n=(r=o.default.SecurityManager.getToken(t))?new o.default.Credential(r,"token"):null)||(n=(r=o.default.SecurityManager.getKey(t))?new o.default.Credential(r,"key"):null);break;case o.default.ServerType.ONLINE:n=(r=o.default.SecurityManager.getKey(t))?new o.default.Credential(r,"key"):null;break;default:n=(r=o.default.SecurityManager.getToken(t))?new o.default.Credential(r,"token"):null}return n}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(n,n.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=o.default.Util.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=o.default.Util.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=o.default.Util.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=o.default.Util.urlAppend(e.url,o.default.Util.getParameterString(e.params||{}))),e.params=e.data),i.FetchRequest.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json()}).then(function(t){var n=t;if("string"==typeof t&&(n=(new o.default.Format.JSON).read(t)),(!n||n.error||n.code>=300&&304!==n.code)&&(n=n&&n.error?{error:n.error}:{error:n}),n.error){(e.scope?o.default.Function.bind(e.failure,e.scope):e.failure)(n)}else{n.succeed=void 0==n.succeed||n.succeed;(e.scope?o.default.Function.bind(e.success,e.scope):e.success)(n)}})}}]),e}();t.default=a,o.default.CommonServiceBase=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRequest=t.Support=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(39);var i=r(n(46)),a=r(n(40)),s=r(n(0)),u=t.Support=s.default.Support=s.default.Support||{cors:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest};t.FetchRequest=s.default.FetchRequest={commit:function(e,t,n,r){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,n,r);case"POST":return this.post(t,n,r);case"PUT":return this.put(t,n,r);case"DELETE":return this.delete(t,n,r);default:return this.get(t,n,r)}},get:function(e,t,n){n=n||{};if(e=this._processUrl(e,n),e=s.default.Util.urlAppend(e,this._getParameterString(t||{})),!this.urlIsLong(e)){if(s.default.Util.isInTheSameDomain(e)||u.cors||n.proxy)return this._fetch(e,t,n,"GET");if(!s.default.Util.isInTheSameDomain(e))return e=e.replace(".json",".jsonp"),this._fetchJsonp(e,n)}return this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,n)},delete:function(e,t,n){n=n||{};return e=this._processUrl(e,n),e=s.default.Util.urlAppend(e,this._getParameterString(t||{})),!this.urlIsLong(e)&&u.cors?this._fetch(e,t,n,"DELETE"):this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,n)},post:function(e,t,n){return n=n||{},this._fetch(this._processUrl(e,n),t,n,"POST")},put:function(e,t,n){return n=n||{},this._fetch(this._processUrl(e,n),t,n,"PUT")},urlIsLong:function(e){for(var t=0,n=null,r=0,o=e.length;r<o;r++)(n=e.charCodeAt(r))<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,n,r){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,r)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var n=e.split("?");2===n.length&&(e=n[0]+".json?"+n[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,n,r){return n=n||{},n.headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,(0,i.default)(e,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?t:void 0,credentials:n.withCredentials?"include":"omit",mode:"cors"}).then(function(e){return e})):(0,i.default)(e,{method:r,body:"PUT"===r||"POST"===r?t:void 0,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors"}).then(function(e){return e})},_fetchJsonp:function(e,t){return t=t||{},(0,a.default)(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},e),t.then(n,r)})},_getParameterString:function(e){var t=[];for(var n in e){var r=e[n];if(null!=r&&"function"!=typeof r){var i;if("object"===(void 0===r?"undefined":o(r))&&r.constructor===Array){for(var a,s=[],u=0,l=r.length;u<l;u++)a=r[u],s.push(encodeURIComponent(null===a||void 0===a?"":a));i="["+s.join(",")+"]"}else i=encodeURIComponent(r);t.push(encodeURIComponent(n)+"="+i)}}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayExt=t.FunctionExt=t.NumberExt=t.StringExt=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));r.default.inherit=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n;var o,i,a;for(o=2,i=arguments.length;o<i;o++)"function"==typeof(a=arguments[o])&&(a=a.prototype),r.default.Util.extend(e.prototype,a)},r.default.mixin=function(){function e(e,t){var n=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<n.length;r++){var o=n[r];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,i)}}}for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=0;o<n.length;o++)e(this,new n[o](r))},i=0;i<n.length;i++){var a=n[i];e(o,a),e(o.prototype,a.prototype),e(o.prototype,new a)}return o};t.StringExt=r.default.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),n=t[0],r=1,o=t.length;r<o;r++){var i=t[r];n+=i.charAt(0).toUpperCase()+i.substring(1)}return n},format:function(e,t,n){t||(t=window);return e.replace(r.default.String.tokenRegEx,function(e,r){for(var o,i=r.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=t),o=o[i[a]];return"function"==typeof o&&(o=n?o.apply(null,n):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return r.default.String.numberRegEx.test(e)},numericIf:function(e){return r.default.String.isNumeric(e)?parseFloat(e):e}};var o=t.NumberExt=r.default.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return t>0&&(n=parseFloat(e.toPrecision(t))),n},format:function(e,t,n,o){t=void 0!==t?t:0,n=void 0!==n?n:r.default.Number.thousandsSeparator,o=void 0!==o?o:r.default.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var i=e.toString().split(".");1===i.length&&null==t&&(t=0);var a=i[0];if(n)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+n+"$2");var u;if(0==t)u=a;else{var l=i.length>1?i[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),u=a+o+l}return u}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return o.limitSigDigs(this,e)});t.FunctionExt=r.default.Function={bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},t.ArrayExt=r.default.Array={filter:function(e,t,n){var r=[];if(Array.prototype.filter)r=e.filter(t,n);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var a=e[i];t.call(n,a,i,e)&&r.push(a)}}return r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));n(6);t.Util=o.default.Util=o.default.Util||{};o.default.Util.extend=function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},o.default.Util.copy=function(e,t){e=e||{};var n;if(t)for(var r in e)void 0!==(n=t[r])&&(e[r]=n)},o.default.Util.reset=function(e){e=e||{};for(var t in e)if(e.hasOwnProperty(t)){if("object"===r(e[t])&&e[t]instanceof Array){for(var n in e[t])e[t][n].destroy&&e[t][n].destroy();e[t].length=0}else"object"===r(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},o.default.Util.getElement=function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var r=arguments[t];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;e.push(r)}return e},o.default.Util.isElement=function(e){return!(!e||1!==e.nodeType)},o.default.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.default.Util.removeItem=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1);return e},o.default.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},o.default.Util.modifyDOMElement=function(e,t,n,r,o,i,a,s){t&&(e.id=t),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},o.default.Util.applyDefaults=function(e,t){e=e||{};var n="function"==typeof window.Event&&t instanceof window.Event;for(var r in t)(void 0===e[r]||!n&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!e.hasOwnProperty(r))&&(e[r]=t[r]);return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},o.default.Util.getParameterString=function(e){var t=[];for(var n in e){var o=e[n];if(null!=o&&"function"!=typeof o){var i;if("object"===(void 0===o?"undefined":r(o))&&o.constructor===Array){for(var a,s=[],u=0,l=o.length;u<l;u++)a=o[u],s.push(encodeURIComponent(null===a||void 0===a?"":a));i=s.join(",")}else i=encodeURIComponent(o);t.push(encodeURIComponent(n)+"="+i)}}return t.join("&")},o.default.Util.urlAppend=function(e,t){var n=e;if(t){var r=(e+" ").split(/[?&]/);n+=" "===r.pop()?t:r.length?"&"+t:"?"+t}return n},o.default.Util.DEFAULT_PRECISION=14,o.default.Util.toFloat=function(e,t){return null==t&&(t=o.default.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},o.default.Util.rad=function(e){return e*Math.PI/180},o.default.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(o.default.String.contains(e,"?")){var n=e.indexOf("?")+1,r=o.default.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(n,r)}for(var i={},a=t.split(/[&;]/),s=0,u=a.length;s<u;++s){var l=a[s].split("=");if(l[0]){var c=l[0];try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}var f=(l[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}1==(f=f.split(",")).length&&(f=f[0]),i[c]=f}}return i},o.default.Util.lastSeqID=0,o.default.Util.createUniqueID=function(e){return null==e&&(e="id_"),o.default.Util.lastSeqID+=1,e+o.default.Util.lastSeqID},o.default.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},o.default.INCHES_PER_UNIT.in=o.default.INCHES_PER_UNIT.inches,o.default.INCHES_PER_UNIT.degrees=o.default.INCHES_PER_UNIT.dd,o.default.INCHES_PER_UNIT.nmi=1852*o.default.INCHES_PER_UNIT.m,o.default.METERS_PER_INCH=.0254000508001016,o.default.Util.extend(o.default.INCHES_PER_UNIT,{Inch:o.default.INCHES_PER_UNIT.inches,Meter:1/o.default.METERS_PER_INCH,Foot:.3048006096012192/o.default.METERS_PER_INCH,IFoot:.3048/o.default.METERS_PER_INCH,ClarkeFoot:.3047972651151/o.default.METERS_PER_INCH,SearsFoot:.30479947153867626/o.default.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/o.default.METERS_PER_INCH,IInch:.0254/o.default.METERS_PER_INCH,MicroInch:254e-7/o.default.METERS_PER_INCH,Mil:2.54e-8/o.default.METERS_PER_INCH,Centimeter:.01/o.default.METERS_PER_INCH,Kilometer:1e3/o.default.METERS_PER_INCH,Yard:.9144018288036576/o.default.METERS_PER_INCH,SearsYard:.914398414616029/o.default.METERS_PER_INCH,IndianYard:.9143985307444408/o.default.METERS_PER_INCH,IndianYd37:.91439523/o.default.METERS_PER_INCH,IndianYd62:.9143988/o.default.METERS_PER_INCH,IndianYd75:.9143985/o.default.METERS_PER_INCH,IndianFoot:.30479951/o.default.METERS_PER_INCH,IndianFt37:.30479841/o.default.METERS_PER_INCH,IndianFt62:.3047996/o.default.METERS_PER_INCH,IndianFt75:.3047995/o.default.METERS_PER_INCH,Mile:1609.3472186944373/o.default.METERS_PER_INCH,IYard:.9144/o.default.METERS_PER_INCH,IMile:1609.344/o.default.METERS_PER_INCH,NautM:1852/o.default.METERS_PER_INCH,"Lat-66":110943.31648893273/o.default.METERS_PER_INCH,"Lat-83":110946.25736872235/o.default.METERS_PER_INCH,Decimeter:.1/o.default.METERS_PER_INCH,Millimeter:.001/o.default.METERS_PER_INCH,Dekameter:10/o.default.METERS_PER_INCH,Decameter:10/o.default.METERS_PER_INCH,Hectometer:100/o.default.METERS_PER_INCH,GermanMeter:1.0000135965/o.default.METERS_PER_INCH,CaGrid:.999738/o.default.METERS_PER_INCH,ClarkeChain:20.1166194976/o.default.METERS_PER_INCH,GunterChain:20.11684023368047/o.default.METERS_PER_INCH,BenoitChain:20.116782494375872/o.default.METERS_PER_INCH,SearsChain:20.11676512155/o.default.METERS_PER_INCH,ClarkeLink:.201166194976/o.default.METERS_PER_INCH,GunterLink:.2011684023368047/o.default.METERS_PER_INCH,BenoitLink:.20116782494375873/o.default.METERS_PER_INCH,SearsLink:.2011676512155/o.default.METERS_PER_INCH,Rod:5.02921005842012/o.default.METERS_PER_INCH,IntnlChain:20.1168/o.default.METERS_PER_INCH,IntnlLink:.201168/o.default.METERS_PER_INCH,Perch:5.02921005842012/o.default.METERS_PER_INCH,Pole:5.02921005842012/o.default.METERS_PER_INCH,Furlong:201.1684023368046/o.default.METERS_PER_INCH,Rood:3.778266898/o.default.METERS_PER_INCH,CapeFoot:.3047972615/o.default.METERS_PER_INCH,Brealey:375/o.default.METERS_PER_INCH,ModAmFt:.304812252984506/o.default.METERS_PER_INCH,Fathom:1.8288/o.default.METERS_PER_INCH,"NautM-UK":1853.184/o.default.METERS_PER_INCH,"50kilometers":5e4/o.default.METERS_PER_INCH,"150kilometers":15e4/o.default.METERS_PER_INCH}),o.default.Util.extend(o.default.INCHES_PER_UNIT,{mm:o.default.INCHES_PER_UNIT.Meter/1e3,cm:o.default.INCHES_PER_UNIT.Meter/100,dm:100*o.default.INCHES_PER_UNIT.Meter,km:1e3*o.default.INCHES_PER_UNIT.Meter,kmi:o.default.INCHES_PER_UNIT.nmi,fath:o.default.INCHES_PER_UNIT.Fathom,ch:o.default.INCHES_PER_UNIT.IntnlChain,link:o.default.INCHES_PER_UNIT.IntnlLink,"us-in":o.default.INCHES_PER_UNIT.inches,"us-ft":o.default.INCHES_PER_UNIT.Foot,"us-yd":o.default.INCHES_PER_UNIT.Yard,"us-ch":o.default.INCHES_PER_UNIT.GunterChain,"us-mi":o.default.INCHES_PER_UNIT.Mile,"ind-yd":o.default.INCHES_PER_UNIT.IndianYd37,"ind-ft":o.default.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/o.default.METERS_PER_INCH}),o.default.DOTS_PER_INCH=96,o.default.Util.normalizeScale=function(e){return e>1?1/e:e},o.default.Util.getResolutionFromScale=function(e,t){var n;if(e){null==t&&(t="degrees");n=1/(o.default.Util.normalizeScale(e)*o.default.INCHES_PER_UNIT[t]*o.default.DOTS_PER_INCH)}return n},o.default.Util.getScaleFromResolution=function(e,t){null==t&&(t="degrees");return e*o.default.INCHES_PER_UNIT[t]*o.default.DOTS_PER_INCH},o.default.IS_GECKO=function(){var e=navigator.userAgent.toLowerCase();return-1===e.indexOf("webkit")&&-1!==e.indexOf("gecko")}(),o.default.Browser=function(){var e,t="",n="",r="pc",o=navigator.userAgent.toLowerCase();return o.indexOf("msie")>-1||o.indexOf("trident")>-1&&o.indexOf("rv")>-1?(t="msie",e=o.match(/msie ([\d.]+)/)||o.match(/rv:([\d.]+)/)):o.indexOf("chrome")>-1?(t="chrome",e=o.match(/chrome\/([\d.]+)/)):o.indexOf("firefox")>-1?(t="firefox",e=o.match(/firefox\/([\d.]+)/)):o.indexOf("opera")>-1?(t="opera",e=o.match(/version\/([\d.]+)/)):o.indexOf("safari")>-1&&(t="safari",e=o.match(/version\/([\d.]+)/)),n=e?e[1]:"",o.indexOf("ipad")>-1||o.indexOf("ipod")>-1||o.indexOf("iphone")>-1?r="apple":o.indexOf("android")>-1&&(n=(e=o.match(/version\/([\d.]+)/))?e[1]:"",r="android"),{name:t,version:n,device:r}}(),o.default.Util.getBrowser=function(){return o.default.Browser},o.default.Util.isSupportCanvas=function(){var e=!0,t=o.default.Util.getBrowser();return document.createElement("canvas").getContext?("firefox"===t.name&&parseFloat(t.version)<5&&(e=!1),"safari"===t.name&&parseFloat(t.version)<4&&(e=!1),"opera"===t.name&&parseFloat(t.version)<10&&(e=!1),"msie"===t.name&&parseFloat(t.version)<9&&(e=!1)):e=!1,e}(),o.default.Util.supportCanvas=function(){return o.default.Util.isSupportCanvas},o.default.INCHES_PER_UNIT.degree=o.default.INCHES_PER_UNIT.dd,o.default.INCHES_PER_UNIT.meter=o.default.INCHES_PER_UNIT.m,o.default.INCHES_PER_UNIT.foot=o.default.INCHES_PER_UNIT.ft,o.default.INCHES_PER_UNIT.inch=o.default.INCHES_PER_UNIT.inches,o.default.INCHES_PER_UNIT.mile=o.default.INCHES_PER_UNIT.mi,o.default.INCHES_PER_UNIT.kilometer=o.default.INCHES_PER_UNIT.km,o.default.INCHES_PER_UNIT.yard=o.default.INCHES_PER_UNIT.yd,o.default.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===t)return!0;var o,i=o=e.substring(0,t),a=n.substring(r+2);r=a.indexOf("/");var s=a.indexOf(":"),u=a.substring(0,r),l=document.location.protocol;if(-1!==s||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==i.toLowerCase())return!1;var c=(i=e.substring(t+2)).indexOf(":");t=i.indexOf("/");var f,p=i.substring(0,t);-1!==c?f=i.substring(0,c):(f=i.substring(0,t),p+=":"+("http:"===o.toLowerCase()?80:443));return f===document.domain&&p===u},o.default.Util.calculateDpi=function(e,t,n,r,o){if(e&&t&&n){var i=e.getWidth(),a=e.getHeight(),s=t.w,u=t.h;o=o||6378137;var l;if("degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){var c=i/s,f=a/u;l=254/(c>f?c:f)/n/(2*Math.PI*o/360)/1e4}else{l=254/(i/s)/n/1e4}return l}},o.default.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t='"'+t.replace(/(["\\])/g,"\\$1")+'"',t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace("<","&lt;"),t=t.replace(">","&gt;"),t=t.replace(/%/g,"%25"),t=t.replace(/&/g,"%26");case Array:for(var n=[],i=0,a=t.length;i<a;i++)n.push(o.default.Util.toJSON(t[i]));return"["+n.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===(void 0===t?"undefined":r(t))){if(t.length){for(var s=[],u=0,l=t.length;u<l;u++)s.push(o.default.Util.toJSON(t[u]));return"["+s.join(",")+"]"}var c=[];for(var f in t)"function"!=typeof t[f]&&"CLASS_NAME"!==f&&"parent"!==f&&c.push("'"+f+"':"+o.default.Util.toJSON(t[f]));return c.length>0?"{"+c.join(",")+"}":"{}"}return t.toString()}},o.default.Util.getResolutionFromScaleDpi=function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?(e=o.default.Util.normalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4):-1},o.default.Util.getScaleFromResolutionDpi=function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4:-1},o.default.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},o.default.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var n in t){var r=t[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(e[n]=r)}return e},o.default.Util.copyAttributesWithClip=function(e,t,n){if(e=e||{},t)for(var r in t){var o=!1;if(n&&n.length)for(var i=0,a=n.length;i<a;i++)if(r===n[i]){o=!0;break}if(!0!==o){var s=t[r];void 0!==s&&"CLASS_NAME"!==r&&"function"!=typeof s&&(e[r]=s)}}return e},o.default.Util.cloneObject=function(e){if(null===e||"object"!==(void 0===e?"undefined":r(e)))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array){return e.slice(0)}if(e instanceof Object){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=o.default.Util.cloneObject(e[i]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},o.default.Util.lineIntersection=function(e,t,n,r){var i,a,s=null,u=(r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x),l=(t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x),c=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);if(0!=c)a=l/c,s=(i=u/c)>=0&&a<=1&&i<=1&&a>=0?new o.default.Geometry.Point(e.x+i*(t.x-e.x),e.y+i*(t.y-e.y)):"No Intersection";else if(0==u&&0==l){var f=Math.max(e.y,t.y),p=Math.min(e.y,t.y),d=Math.max(e.x,t.x),h=Math.min(e.x,t.x);s=(n.y>=p&&n.y<=f||r.y>=p&&r.y<=f)&&n.x>=h&&n.x<=d||r.x>=h&&r.x<=d?"Coincident":"Parallel"}else s="Parallel";return s},o.default.Util.getTextBounds=function(e,t,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",e.fontSize&&(n.style.fontSize=e.fontSize),e.fontFamily&&(n.style.fontFamily=e.fontFamily),e.fontWeight&&(n.style.fontWeight=e.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=t;var r=n.clientWidth,o=n.clientHeight;return document.body.removeChild(n),{textWidth:r,textHeight:o}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0}),t.MapVLayer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=r(n(3)),u=r(n(13)),l=t.MapVLayer=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(r.dataSet=null,r.options=null,r.supported=!1,r.canvas=null,r.canvasContext=null,r.CLASS_NAME="SuperMap.Layer.MapVLayer",n&&s.default.Util.extend(r,n),r.canvas=document.createElement("canvas"),!r.canvas.getContext)return o(r);r.supported=!0,r.canvas.style.position="absolute",r.canvas.style.top="0px",r.canvas.style.left="0px",r.div.appendChild(r.canvas);var i=r.options&&r.options.context||"2d";r.canvasContext=r.canvas.getContext(i);var a="undefined"==typeof window?{}:window,u=r.devicePixelRatio=a.devicePixelRatio;return"2d"==r.options.context&&r.canvasContext.scale(u,u),r.attribution="Â© 2017 ç¾åº¦ <a href='http://mapv.baidu.com' target='_blank'>MapV</a> with <span>Â© <a target='_blank' href='http://iclient.supermap.io' style='color: #08c;text-decoration: none;'>SuperMap iClient</a></span>",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Layer),i(t,[{key:"destroy",value:function(){this.dataSet=null,this.options=null,this.renderer=null,this.supported=null,this.canvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"addData",value:function(e,t){this.renderer&&this.renderer.addData(e,t)}},{key:"setData",value:function(e,t){this.renderer&&this.renderer.setData(e,t)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"setMap",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMap",this).call(this,e),this.renderer=new u.default(e,this,this.dataSet,this.options),this.supported?this.redraw():this.map.removeLayer(this)}},{key:"moveTo",value:function(e,n,r){if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this).call(this,e,n,r),this.supported){if(this.zoomChanged=n,!r){this.div.style.visibility="hidden",this.div.style.left=-parseInt(this.map.layerContainerDiv.style.left)+"px",this.div.style.top=-parseInt(this.map.layerContainerDiv.style.top)+"px";var o=this.map.getSize();this.div.style.width=parseInt(o.w)+"px",this.div.style.height=parseInt(o.h)+"px",this.canvas.width=parseInt(o.w),this.canvas.height=parseInt(o.h),this.canvas.style.width=this.div.style.width,this.canvas.style.height=this.div.style.height,this.maxWidth=o.w,this.maxHeight=o.h,this.div.style.visibility="",n||this.renderer&&this.renderer.render()}n&&this.renderer&&this.renderer.render()}}},{key:"transferToMapLatLng",value:function(e){var t="EPSG:4326",n=this.map.getUnits()||"degree";return["m","meter"].indexOf(n.toLowerCase())>-1&&(t="EPSG:3857"),new s.default.LonLat(e.lon,e.lat).transform("EPSG:4326",t)}}]),t}();s.default.Layer.MapVLayer=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddressMatchService=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=r(n(3)),a=r(n(4)),s=r(n(19)),u=t.AddressMatchService=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.REST.AddressMatchService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"code",value:function(e,t){new s.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).code(this.url+"/geocoding",e)}},{key:"decode",value:function(e,t){new s.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).decode(this.url+"/geodecoding",e)}}]),t}();i.default.REST.AddressMatchService=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessingService=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=r(n(3)),a=n(1),s=r(n(4)),u=r(n(25)),l=r(n(29)),c=r(n(31)),f=r(n(33)),p=r(n(37)),d=r(n(27)),h=r(n(21)),y=r(n(35)),v=t.ProcessingService=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.kernelDensityJobs={},r.summaryMeshJobs={},r.queryJobs={},r.summaryRegionJobs={},r.vectorClipJobs={},r.overlayGeoJobs={},r.buffersJobs={},r.topologyValidatorJobs={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"getKernelDensityJobs",value:function(e,t){var n=this._processFormat(t);new u.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,n){var r=this._processFormat(n);new u.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new u.default(o.url,{eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:i}).addKernelDensityJob(e,n)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var n=this._processFormat(t);new c.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,n){var r=this._processFormat(n);new c.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new c.default(o.url,{eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:i}).addSummaryMeshJob(e,n)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var n=this._processFormat(t);new l.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,n){var r=this._processFormat(n);new l.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new l.default(o.url,{eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:a}).addQueryJob(i,n)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var n=this._processFormat(t);new f.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,n){var r=this._processFormat(n);new f.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new f.default(o.url,{eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:i}).addSummaryRegionJob(e,n)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var n=this._processFormat(t);new p.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,n){var r=this._processFormat(n);new p.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,n,r){var o=this,i=o._processParams(e),a=o._processFormat(r);new p.default(o.url,{serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:a}).addVectorClipJob(i,n)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var n=this._processFormat(t);new d.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,n){var r=this._processFormat(n);new d.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new d.default(o.url,{serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:i}).addOverlayGeoJob(e,n)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var n=this._processFormat(t);new h.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,n){var r=this._processFormat(n);new h.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new h.default(o.url,{serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:i}).addBuffersJob(e,n)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var n=this._processFormat(t);new y.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:n}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,n){var r=this._processFormat(n);new y.default(this.url,{serverType:this.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:r}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,n,r){var o=this,i=o._processFormat(r);new y.default(o.url,{serverType:o.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:i}).addTopologyValidatorJob(e,n)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"_processFormat",value:function(e){return e||a.DataFormat.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.geometryQuery&&(e.geometryQuery=this._convertPatams(e.geometryQuery)),e.geometryClip&&(e.geometryClip=this._convertPatams(e.geometryClip)),e):{}}},{key:"_convertPatams",value:function(e){var t={};if(e.length<1)t="";else{for(var n=[],r=0;r<e.length;r++){var o={};o.x=e[r].x,o.y=e[r].y,n.push(o)}t.type="REGION",t.points=n}return t}}]),t}();i.default.REST.ProcessingService=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(18)),u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));r.callback=null,r.CLASS_NAME="SuperMap.TimeFlowControl";var o=r;return Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),o.update=o.update.bind(o),o.oldTime=o.currentTime,o.callback=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"updateOptions",value:function(e){e=e||{},i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}]),t}();t.default=u,a.default.TimeFlowControl=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=r(n(0)),a=r(n(47)),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.client=null,this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=null,this.eventListeners=null,n=n||{};var r=this;r.url=t,r.client=new a.default.Client({host:r.url}),r.change=n.change,r.geoFence=n.geoFence,r.openGeoFence=n.openGeoFence,r.outOfGeoFence=n.outOfGeoFence,r.events=new i.default.Events(r,null,r.EVENT_TYPES),r.eventListeners=n.eventListeners,r.eventListeners instanceof Object&&r.events.on(r.eventListeners)}return o(e,[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client.delete(e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var n=this;return n.openGeoFence?n.client.msearch(e,t).then(function(e){n._update(e.responses)},function(e){n.events.triggerEvent("error",{error:e})}):n.client.msearch(e,t)}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var n=this;return n.openGeoFence?n.client.search(e,t).then(function(e){n._update(e.responses)},function(e){n.events.triggerEvent("error",{error:e})}):n.client.search(e,t)}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e){var t=this;e&&(t.data=e,t.geoFence&&t._validateDatas(e),t.events.triggerEvent("change",{data:t.data}),t.change&&t.change(e))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,n=e.length;for(t=0;t<n;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(n){var r=n._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,a=t.geoFence.center[1]*o,s=r.x*o,u=r.y*o;return t._distance(s,u,i,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),n})}},{key:"_distance",value:function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))}},{key:"_getMeterPerMapUnit",value:function(e){var t=void 0;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}]),e}();t.default=s,i.default.ElasticSearch=s},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),s=n(48),u=s.baiduMapLayer?s.baiduMapLayer.__proto__:Function,l=function(e){function t(e,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o,i));if(!u){var s;return s=a,r(a,s)}var l=a;return i=i||{},l.init(i),l.argCheck(i),a.canvasLayer=n,l.transferToMercator(),a.clickEvent=a.clickEvent.bind(a),a.mousemoveEvent=a.mousemoveEvent.bind(a),a.bindEvent(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u),o(t,[{key:"clickEvent",value:function(e){var n=e.xy;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,n,e)}},{key:"mousemoveEvent",value:function(e){var n=e.xy;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,n,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.events.on({click:this.clickEvent}),this.options.methods.mousemove&&e.events.on({mousemove:this.mousemoveEvent}))}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.events.un({click:this.clickEvent}),this.options.methods.mousemove&&e.events.un({mousemove:this.mousemoveEvent}))}},{key:"getContext",value:function(){return this.canvasLayer&&this.canvasLayer.canvasContext}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"setData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet=this.dataSet||new s.DataSet,this.dataSet.set(n),this.update({options:t})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"render",value:function(e){this._canvasUpdate(e)}},{key:"transferToMercator",value:function(){if(this.options.coordType&&["bd09mc","coordinates_mercator"].indexOf(this.options.coordType)>-1){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var t=a.default.Projection.transform({x:e[0],y:e[1]},"EPSG:3857","EPSG:4326");return[t.x,t.y]},"coordinates","coordinates"),this.dataSet._set(e)}}},{key:"_canvasUpdate",value:function(e){if(this.canvasLayer){var t=this.options.animation,n=this.getContext(),r=this.map;if(this.isEnabledTime()){if(void 0===e)return void this.clear(n);"2d"===this.context&&(n.save(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, .1)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore())}else this.clear(n);if("2d"===this.context)for(var o in this.options)n[o]=this.options[o];else n.clear(n.COLOR_BUFFER_BIT);if(!(this.options.minZoom&&r.getZoom()<this.options.minZoom||this.options.maxZoom&&r.getZoom()>this.options.maxZoom)){var i=this.canvasLayer,a={fromColumn:"coordinates",transferCoordinate:function(e){var t=i.transferToMapLatLng({lon:e[0],lat:e[1]}),n=r.getViewPortPxFromLonLat(t);return[n.x,n.y]}};void 0!==e&&(a.filter=function(n){var r=t.trails||10;return e&&n.time>e-r&&n.time<e});var u=this.dataSet.get(a);this.processData(u),this.options._size=this.options.size;var l=r.getViewPortPxFromLonLat(i.transferToMapLatLng({lon:0,lat:0})),c=Math.pow(2,14-r.getZoom());"m"==this.options.unit?(this.options.size&&(this.options._size=this.options.size/c),this.options.width&&(this.options._width=this.options.width/c),this.options.height&&(this.options._height=this.options.height/c)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(n,new s.DataSet(u),this.options,l),this.options.updateCallback&&this.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.events.on({movestart:this.animatorMovestartEvent.bind(this)}),this.map.events.on({moveend:this.animatorMoveendEvent.bind(this)})}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"show",value:function(){this.map.addLayer(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeLayer(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer.redraw()}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value="",this.name="token",this.CLASS_NAME="SuperMap.Credential",this.value=t||this.value,this.name=n||this.name}return r(e,[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}]),e}();i.CREDENTIAL=null,t.default=i,o.default.Credential=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(7),i=t.Event=r.default.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var n=r.default.Event.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,r){var i=o.Util.getElement(e);if(r=r||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!i._eventCacheID){var a="eventCacheID_";i.id&&(a=i.id+"_"+a),i._eventCacheID=o.Util.createUniqueID(a)}var s=i._eventCacheID;this.observers[s]||(this.observers[s]=[]),this.observers[s].push({element:i,name:t,observer:n,useCapture:r}),i.addEventListener?i.addEventListener(t,n,r):i.attachEvent&&i.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=o.Util.getElement(e)._eventCacheID;this._removeElementObservers(r.default.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var n=e[t],o=new Array(n.element,n.name,n.observer,n.useCapture);r.default.Event.stopObserving.apply(this,o)}},stopObserving:function(e,t,n,i){i=i||!1;var a=o.Util.getElement(e),s=a._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)&&(t="keydown");var u=!1,l=r.default.Event.observers[s];if(l)for(var c=0;!u&&c<l.length;){var f=l[c];if(f.name===t&&f.observer===n&&f.useCapture===i){l.splice(c,1),0==l.length&&delete r.default.Event.observers[s],u=!0;break}c++}return u&&(a.removeEventListener?a.removeEventListener(t,n,i):a&&a.detachEvent&&a.detachEvent("on"+t,n)),u},unloadCache:function(){if(r.default.Event&&r.default.Event.observers){for(var e in r.default.Event.observers){var t=r.default.Event.observers[e];r.default.Event._removeElementObservers.apply(this,[t])}r.default.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};r.default.Event=i,r.default.Event.observe(window,"unload",r.default.Event.unloadCache,!1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=r(n(0)),s=r(n(17)),u=n(15),l=n(6),c=n(7),f=function(){function e(t,n,r,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners=null,this.object=null,this.element=null,this.eventTypes=null,this.eventHandler=null,this.fallThrough=null,this.includeXY=!1,this.extensions=null,this.extensionCount=null,this.clearMouseListener=null,this.CLASS_NAME="SuperMap.Events",c.Util.extend(this,i),this.object=t,this.fallThrough=o,this.listeners={},this.extensions={},this.extensionCount={},this.eventTypes=[],null!=r)for(var a=0,s=r.length;a<s;a++)this.addEventType(r[a]);null!=n&&this.attachToElement(n)}return i(e,[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(u.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&u.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?u.Event.stopObservingElement(this.element):(this.eventHandler=l.FunctionExt.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=l.FunctionExt.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,n=this.BROWSER_EVENTS.length;t<n;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),u.Event.observe(e,r,this.eventHandler)}u.Event.observe(e,"dragstart",u.Event.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,n,r,i){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=r&&-1!==c.Util.indexOf(this.eventTypes,t)){null==n&&(n=this.object);var a=this.listeners[t];a||(a=[],this.listeners[t]=a,this.extensionCount[t]=0);var s={obj:n,func:r};i?(a.splice(this.extensionCount[t],0,s),"object"===(void 0===i?"undefined":o(i))&&i.extension&&this.extensionCount[t]++):a.push(s)}}},{key:"registerPriority",value:function(e,t,n){this.register(e,t,n,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,n){null==t&&(t=this.object);var r=this.listeners[e];if(null!=r)for(var o=0,i=r.length;o<i;o++)if(r[o].obj===t&&r[o].func===n){r.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var r,o=0,i=(n=n.slice()).length;o<i;o++){var a=n[o];if(void 0!=(r=a.func.apply(a.obj,[t]))&&0==r)break}return this.fallThrough||u.Event.stop(t,!0),r}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var o,i=0,a=0,s=r.length,u=0;u<s;++u)i+=(o=r[u]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(u.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=c.Util.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=c.Util.pagePosition(this.element)),new s.default(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}]),e}();t.default=f,a.default.Events=f,a.default.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=0,this.y=0,this.mode=null,this.CLASS_NAME="SuperMap.Pixel",this.x=t?parseFloat(t):this.x,this.y=n?parseFloat(n):this.y,this.mode=r}return r(e,[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+n)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}]),e}();i.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"},t.default=i,o.default.Pixel=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.speed=1,this.frequency=1e3,this.startTime=null,this.endTime=null,this.repeat=!0,this.currentTime=null,this.oldTime=null,this.running=!1,this.reverse=!1,this.EVENT_TYPES=["start","pause","stop"],this.events=null,this.CLASS_NAME="SuperMap.TimeControlBase";var n=this;t=t||{},n.speed=t.speed&&t.speed>=0?t.speed:n.speed,n.frequency=t.speed&&t.frequency>=0?t.frequency:n.frequency,n.startTime=t.startTime&&null!=t.startTime?t.startTime:0,n.endTime=t.endTime&&null!=t.endTime&&t.endTime>=n.startTime?t.endTime:+new Date,n.repeat=void 0!=t.repeat?t.repeat:n.repeat,n.reverse=void 0!=t.reverse?t.reverse:n.reverse,n.speed=Number(n.speed),n.frequency=Number(n.frequency),n.startTime=Number(n.startTime),n.endTime=Number(n.endTime),n.events=new o.default.Events(this,null,this.EVENT_TYPES),n.startTime=Date.parse(new Date(this.startTime)),n.endTime=Date.parse(new Date(this.endTime)),n.running=!1,n.currentTime=n.startTime}return r(e,[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}]),e}();t.default=i,o.default.TimeControlBase=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(4)),u=n(5),l=r(n(22)),c=r(n(23)),f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.AddressMatchService",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof l.default&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof c.default&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){var n=this;u.FetchRequest.get(e,t).then(function(e){return e.json()}).then(function(e){e?n.serviceProcessCompleted(e):n.serviceProcessFailed(e)}).catch(function(e){n.eventListeners.processFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serviceProcessFailed",this).call(this,e)}}]),t}();t.default=f,a.default.AddressMatchService=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=i.AnalystSizeUnit.METER,this.dissolveField="",t&&o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?(t.analyst=t.analyst||{},t.analyst[n]="bounds"===n?e[n].toBBOX():e[n]):(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=a,o.default.BuffersAnalystJobsParameter=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(20)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r.url+="/spatialanalyst/buffers",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addBuffersJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.BuffersAnalystJobsService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,t){if(t.filters){var n=[];t.filters.split(",").map(function(e){return n.push('"'+e+'"'),e}),t.filters=n}o.default.Util.extend(this,t)}}return r(e,[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}]),e}();t.default=i,o.default.GeoCodingParameter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,t){if(t.filters){var n=[];t.filters.split(",").map(function(e){return n.push('"'+e+'"'),e}),t.filters=n}o.default.Util.extend(this,t)}}return r(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}]),e}();t.default=i,o.default.GeoDecodingParameter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=i.AnalystSizeUnit.METER,this.radiusUnit=i.AnalystSizeUnit.METER,this.areaUnit=i.AnalystAreaUnit.SQUAREMILE,t&&o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?(t.analyst=t.analyst||{},t.analyst[n]="query"===n?e[n].toBBOX():e[n]):(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=a,o.default.KernelDensityJobParameter=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(24)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.KernelDensityJobsService",r.url+="/spatialanalyst/density",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addKernelDensityJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.KernelDensityJobsService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",t&&o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!=n?(t.analyst=t.analyst||{},t.analyst[n]=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=i,o.default.OverlayGeoJobParameter=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(26)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r.url+="/spatialanalyst/overlay",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addOverlayGeoJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.OverlayGeoJobsService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=i.SpatialQueryMode.CONTAIN,t&&o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=a,o.default.SingleObjectQueryJobsParameter=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(28)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r.url+="/spatialanalyst/query",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addQueryJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.SingleObjectQueryJobsService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=i.StatisticAnalystMode.AVERAGE,this.fields="",this.type=i.SummaryType.SUMMARYMESH,t&&o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?("SUMMARYMESH"===e.type&&"regionDataset"!==n||"SUMMARYREGION"===e.type&&!function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}(["meshType","resolution","query"],n))&&(t.analyst=t.analyst||{},t.analyst[n]="query"===n?e[n].toBBOX():e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=a,o.default.SummaryMeshJobParameter=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(30)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r.url+="/spatialanalyst/aggregatepoints",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryMeshJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.SummaryMeshJobsService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields=i.StatisticAnalystMode.AVERAGE,this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=i.AnalystSizeUnit.METER,this.type=i.SummaryType.SUMMARYMESH,t&&o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==n)&&(t.analyst=t.analyst||{},t.analyst[n]="query"===n?e[n].toBBOX():e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=a,o.default.SummaryRegionJobParameter=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(32)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r.url+="/spatialanalyst/summaryregion",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryRegionJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.SummaryRegionJobsService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=i.TopologyValidatorRule.RegionNoOverlap,t&&o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=a,o.default.TopologyValidatorJobsParameter=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(34)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r.url+="/spatialanalyst/topologyvalidator",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addTopologyValidatorJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.TopologyValidatorJobsService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=i.ClipAnalystMode.CLIP,(t=t||{}).mode&&"string"==typeof t.mode&&(t.mode=t.mode.toLowerCase()),o.default.Util.extend(this,t)}return r(e,[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null}}],[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}]),e}();t.default=a,o.default.VectorClipJobsParameter=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},a=r(n(0)),s=r(n(2)),u=r(n(36)),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.CLASS_NAME="SuperMap.VectorClipJobsService",r.url+="/spatialanalyst/vectorclip",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"destroy",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addVectorClipJob",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,u.default,n)}}]),t}();t.default=l,a.default.VectorClipJobsService=l},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(5);r.default.SecurityManager={INNER_WINDOW_WIDTH:600,INNER_WINDOW_HEIGHT:600,generateToken:function(e,t){var n=this.servers[e];if(n)return o.FetchRequest.post(n.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})},registerServers:function(e){this.servers=this.servers||{},r.default.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.servers[n.server]=n}},registerToken:function(e,t){if(this.tokens=this.tokens||{},e&&t){var n=this._getTokenStorageKey(e);this.tokens[n]=t}},registerKey:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=r.default.Util.isArray(e)?e:[e];for(var n=0;n<e.length;n++){var o=this._getUrlRestString(e[0])||e[0];this.keys[o]=t}}},getServerInfo:function(e){return this.servers=this.servers||{},this.servers[e]},getToken:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}},getKey:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]},loginiServer:function(e,t,n,r){e+="/"===e.substr(e.length-1,1)?"services/security/login.json":"/services/security/login.json";var i={username:t&&t.toString(),password:n&&n.toString(),rememberme:r};i=JSON.stringify(i);return o.FetchRequest.post(e,i,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})},logoutiServer:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return o.FetchRequest.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})},loginOnline:function(e,t){var n=r.default.SecurityManager.SSO+"/login?service="+e;this._open(n,t)},loginiPortal:function(e,t,n){e+="/"===e.substr(e.length-1,1)?"web/login.json":"/web/login.json";var r={username:t&&t.toString(),password:n&&n.toString()};r=JSON.stringify(r);return o.FetchRequest.post(e,r,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})},logoutiPortal:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return o.FetchRequest.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})},loginManager:function(e,t,n){if(r.default.Util.isInTheSameDomain(e)){var i="/"===e.substr(e.length-1,1)?e+"icloud/security/tokens.json":e+"/icloud/security/tokens.json",a=t||{},s={username:a.userName&&a.userName.toString(),password:a.password&&a.password.toString()};s=JSON.stringify(s);var u=this;return o.FetchRequest.post(i,s,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return u.imanagerToken=e,e})})}var l=!n||n.isNewTab;this._open(e,l)},destroyAllCredentials:function(){this.keys=null,this.tokens=null,this.servers=null},destroyToken:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}},destroyKey:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}},_open:function(e,t){t=null==t||t;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)},_getTokenStorageKey:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e},_getUrlRestString:function(e){if(!e)return e;var t=e.match(/http:\/\/(.*\/rest)/i);return t?t[0]:e}},r.default.SecurityManager.SSO="https://sso.supermap.com",r.default.SecurityManager.ONLINE="http://www.supermapol.com"},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(43));window.Promise=r.default},function(e,t,n){"use strict";var r,o,i;!function(n,a){o=[t,e],void 0!==(i="function"==typeof(r=a)?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function r(e){var t=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(t)}var o={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,a=t.timeout||o.timeout,s=t.jsonpCallback||o.jsonpCallback,u=void 0;return new Promise(function(o,l){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){o({ok:!0,json:function(){return Promise.resolve(e)}}),u&&clearTimeout(u),r(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+i+s+"="+c),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),u=setTimeout(function(){l(new Error("JSONP request to "+e+" timed out")),n(c),r(f)},a)})}})},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(44),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(){y&&d&&(y=!1,d.length?h=d.concat(h):v=-1,h.length&&s())}function s(){if(!y){var e=i(a);y=!0;for(var t=h.length;t;){for(d=h,h=[];++v<t;)d&&d[v].run();v=-1,t=h.length}d=null,y=!1,function(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var d,h=[],y=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){function o(){}function i(e){if("object"!==n(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,r)}else(1===e._state?s:u)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":n(t))||"function"==typeof t)){var r=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"==typeof r)return void c(function(e,t){return function(){e.apply(t,arguments)}}(r,t),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}var f=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return a(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,r){function o(a,s){try{if(s&&("object"===(void 0===s?"undefined":n(s))||"function"==typeof s)){var u=s.then;if("function"==typeof u)return void u.call(s,function(e){o(a,e)},r)}t[a]=s,0==--i&&e(t)}catch(e){r(e)}}if(0===t.length)return e([]);for(var i=t.length,a=0;a<t.length;a++)o(a,t[a])})},i.resolve=function(e){return e&&"object"===(void 0===e?"undefined":n(e))&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){f(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=i:r.Promise||(r.Promise=i)}(void 0)}).call(t,n(41).setImmediate)},function(e,t,n){"use strict";(function(e,t){!function(e,n){function r(e){delete s[e]}function o(e){if(u)setTimeout(o,0,e);else{var t=s[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{r(e),u=!1}}}}if(!e.setImmediate){var i,a=1,s={},u=!1,l=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){o(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},i=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;i=function(t){var n=l.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():i=function(e){setTimeout(o,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return s[a]=r,i(a),a++},c.clearImmediate=r}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,n(45),n(42))},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";var r=function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(p.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(p.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader;return t.readAsText(e),a(t)}(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e||Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(c)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e,t){var n=(t=t||{}).body;if(l.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=function(e){var t=e.toUpperCase();return d.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function c(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function f(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}var p={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(r)},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},p.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this)},u.call(l.prototype),u.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var h=[301,302,303,307,308];f.redirect=function(e,t){if(-1===h.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})};return function(e,t){return t=t||{timeout:3e4},new Promise(function(n,r){var i;i=l.prototype.isPrototypeOf(e)&&!t?e:new l(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function(e){var t=new o;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();t.append(r,o)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},t="response"in a?a.response:a.responseText;n(new f(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed due to timeout"))},a.open(i.method,i.url,!0),a.timeout=t.timeout||3e4,"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&p.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})}}("undefined"!=typeof self?self:void 0);e.exports=r},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t,n){n(10),n(9),n(11),n(12),e.exports=n(8)}]);